<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Dobby: AICommon::PollLoop Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Dobby
   &#160;<span id="projectnumber">3.0</span>
   </div>
   <div id="projectbrief">Dobby “Docker based Thingy” is a tool for managing and running OCI containers using crun</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>AICommon</b></li><li class="navelem"><a class="el" href="classAICommon_1_1PollLoop.html">PollLoop</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classAICommon_1_1PollLoop-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">AICommon::PollLoop Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A wrapper around epoll that allows for adding, modifying &amp; deleting of source events.  
 <a href="classAICommon_1_1PollLoop.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="PollLoop_8h_source.html">PollLoop.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for AICommon::PollLoop:</div>
<div class="dyncontent">
<div class="center"><img src="classAICommon_1_1PollLoop__inherit__graph.png" border="0" usemap="#aAICommon_1_1PollLoop_inherit__map" alt="Inheritance graph"/></div>
<map name="aAICommon_1_1PollLoop_inherit__map" id="aAICommon_1_1PollLoop_inherit__map">
<area shape="rect" title="A wrapper around epoll that allows for adding, modifying &amp; deleting of source events." alt="" coords="103,95,261,121"/>
<area shape="rect" href="classAICommon_1_1IPollLoop.html" title=" " alt="" coords="5,13,167,39"/>
<area shape="rect" title=" " alt="" coords="191,5,367,47"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for AICommon::PollLoop:</div>
<div class="dyncontent">
<div class="center"><img src="classAICommon_1_1PollLoop__coll__graph.png" border="0" usemap="#aAICommon_1_1PollLoop_coll__map" alt="Collaboration graph"/></div>
<map name="aAICommon_1_1PollLoop_coll__map" id="aAICommon_1_1PollLoop_coll__map">
<area shape="rect" title="A wrapper around epoll that allows for adding, modifying &amp; deleting of source events." alt="" coords="201,109,358,136"/>
<area shape="rect" href="classAICommon_1_1IPollLoop.html" title=" " alt="" coords="5,13,167,39"/>
<area shape="rect" title=" " alt="" coords="191,5,367,47"/>
<area shape="rect" href="classAICommon_1_1Spinlock.html" title=" " alt="" coords="391,13,549,39"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structAICommon_1_1PollLoop_1_1tagPollSourceWrapper.html">tagPollSourceWrapper</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a865914dbb79545a9482743c13b2a6daa"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAICommon_1_1PollLoop.html#a865914dbb79545a9482743c13b2a6daa">PollLoop</a> (const std::string &amp;name, int maxSources=512, long deferredTimeInterval=20)</td></tr>
<tr class="memdesc:a865914dbb79545a9482743c13b2a6daa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a poll loop with the given name and restrictions.  <a href="classAICommon_1_1PollLoop.html#a865914dbb79545a9482743c13b2a6daa">More...</a><br /></td></tr>
<tr class="separator:a865914dbb79545a9482743c13b2a6daa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3ec623ae00485f55246be7b7d2f8621"><td class="memItemLeft" align="right" valign="top"><a id="ab3ec623ae00485f55246be7b7d2f8621"></a>
virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAICommon_1_1PollLoop.html#ab3ec623ae00485f55246be7b7d2f8621">~PollLoop</a> ()</td></tr>
<tr class="memdesc:ab3ec623ae00485f55246be7b7d2f8621"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructs the poll loop, tears down the thread if the loop is running. <br /></td></tr>
<tr class="separator:ab3ec623ae00485f55246be7b7d2f8621"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bec68e5aa186a6564e8d7982d8d8c16"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAICommon_1_1PollLoop.html#a1bec68e5aa186a6564e8d7982d8d8c16">start</a> (int priority=-1) override</td></tr>
<tr class="memdesc:a1bec68e5aa186a6564e8d7982d8d8c16"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts the poll thread.  <a href="classAICommon_1_1PollLoop.html#a1bec68e5aa186a6564e8d7982d8d8c16">More...</a><br /></td></tr>
<tr class="separator:a1bec68e5aa186a6564e8d7982d8d8c16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab95845e01aab416d883a04f78c04d450"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAICommon_1_1PollLoop.html#ab95845e01aab416d883a04f78c04d450">stop</a> () override</td></tr>
<tr class="memdesc:ab95845e01aab416d883a04f78c04d450"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops the poll loop thread.  <a href="classAICommon_1_1PollLoop.html#ab95845e01aab416d883a04f78c04d450">More...</a><br /></td></tr>
<tr class="separator:ab95845e01aab416d883a04f78c04d450"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dabcfb6a63cd62574091afa35e03efd"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAICommon_1_1PollLoop.html#a0dabcfb6a63cd62574091afa35e03efd">addSource</a> (const std::shared_ptr&lt; <a class="el" href="classAICommon_1_1IPollSource.html">IPollSource</a> &gt; &amp;source, int fd, uint32_t events) override</td></tr>
<tr class="memdesc:a0dabcfb6a63cd62574091afa35e03efd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a new event source to the poll loop.  <a href="classAICommon_1_1PollLoop.html#a0dabcfb6a63cd62574091afa35e03efd">More...</a><br /></td></tr>
<tr class="separator:a0dabcfb6a63cd62574091afa35e03efd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8530785ad61b02bc580b91578e533111"><td class="memItemLeft" align="right" valign="top"><a id="a8530785ad61b02bc580b91578e533111"></a>
virtual bool&#160;</td><td class="memItemRight" valign="bottom"><b>modSource</b> (const std::shared_ptr&lt; <a class="el" href="classAICommon_1_1IPollSource.html">IPollSource</a> &gt; &amp;source, uint32_t events) override</td></tr>
<tr class="separator:a8530785ad61b02bc580b91578e533111"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16e1b72ba5e1dbd681d97f8654a7dc31"><td class="memItemLeft" align="right" valign="top"><a id="a16e1b72ba5e1dbd681d97f8654a7dc31"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>delSource</b> (const std::shared_ptr&lt; <a class="el" href="classAICommon_1_1IPollSource.html">IPollSource</a> &gt; &amp;source, int fd=-1) override</td></tr>
<tr class="separator:a16e1b72ba5e1dbd681d97f8654a7dc31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78cfcc2124da0b44389e515f09ded78a"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAICommon_1_1PollLoop.html#a78cfcc2124da0b44389e515f09ded78a">hasSource</a> (const std::shared_ptr&lt; <a class="el" href="classAICommon_1_1IPollSource.html">IPollSource</a> &gt; &amp;source) override</td></tr>
<tr class="memdesc:a78cfcc2124da0b44389e515f09ded78a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if the specified source is currently installed in the pollLoop.  <a href="classAICommon_1_1PollLoop.html#a78cfcc2124da0b44389e515f09ded78a">More...</a><br /></td></tr>
<tr class="separator:a78cfcc2124da0b44389e515f09ded78a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae96184e0f75c19be48f69661e4536d0f"><td class="memItemLeft" align="right" valign="top">virtual std::thread::id&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAICommon_1_1PollLoop.html#ae96184e0f75c19be48f69661e4536d0f">threadId</a> () const override</td></tr>
<tr class="memdesc:ae96184e0f75c19be48f69661e4536d0f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the thread id of the poll loop thread.  <a href="classAICommon_1_1PollLoop.html#ae96184e0f75c19be48f69661e4536d0f">More...</a><br /></td></tr>
<tr class="separator:ae96184e0f75c19be48f69661e4536d0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add4ae9a2aee94647cc3eedadbea8f1b4"><td class="memItemLeft" align="right" valign="top">virtual pid_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAICommon_1_1PollLoop.html#add4ae9a2aee94647cc3eedadbea8f1b4">gettid</a> () const override</td></tr>
<tr class="memdesc:add4ae9a2aee94647cc3eedadbea8f1b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the linux thread id of the poll loop thread.  <a href="classAICommon_1_1PollLoop.html#add4ae9a2aee94647cc3eedadbea8f1b4">More...</a><br /></td></tr>
<tr class="separator:add4ae9a2aee94647cc3eedadbea8f1b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:a80ffaaa6c8f0e51d7290833b75d137db"><td class="memItemLeft" align="right" valign="top"><a id="a80ffaaa6c8f0e51d7290833b75d137db"></a>
typedef struct <a class="el" href="structAICommon_1_1PollLoop_1_1tagPollSourceWrapper.html">AICommon::PollLoop::tagPollSourceWrapper</a>&#160;</td><td class="memItemRight" valign="bottom"><b>PollSourceWrapper</b></td></tr>
<tr class="separator:a80ffaaa6c8f0e51d7290833b75d137db"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a7a20c24ef4fd31f715f322ad234c589e"><td class="memItemLeft" align="right" valign="top"><a id="a7a20c24ef4fd31f715f322ad234c589e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>init</b> ()</td></tr>
<tr class="separator:a7a20c24ef4fd31f715f322ad234c589e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd8da81ba9d8b1a08f9ff577b0edfa10"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAICommon_1_1PollLoop.html#acd8da81ba9d8b1a08f9ff577b0edfa10">run</a> (const std::string &amp;name, int priority)</td></tr>
<tr class="memdesc:acd8da81ba9d8b1a08f9ff577b0edfa10"><td class="mdescLeft">&#160;</td><td class="mdescRight">The poll loop thread function.  <a href="classAICommon_1_1PollLoop.html#acd8da81ba9d8b1a08f9ff577b0edfa10">More...</a><br /></td></tr>
<tr class="separator:acd8da81ba9d8b1a08f9ff577b0edfa10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ef583f71c1d91474d429b09af233db3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAICommon_1_1PollLoop.html#a8ef583f71c1d91474d429b09af233db3">enableDeferredTimer</a> ()</td></tr>
<tr class="memdesc:a8ef583f71c1d91474d429b09af233db3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enables the deferred timer event source.  <a href="classAICommon_1_1PollLoop.html#a8ef583f71c1d91474d429b09af233db3">More...</a><br /></td></tr>
<tr class="separator:a8ef583f71c1d91474d429b09af233db3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adac8926977e51c26ea1b7116b5813fda"><td class="memItemLeft" align="right" valign="top"><a id="adac8926977e51c26ea1b7116b5813fda"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAICommon_1_1PollLoop.html#adac8926977e51c26ea1b7116b5813fda">disableDeferredTimer</a> ()</td></tr>
<tr class="memdesc:adac8926977e51c26ea1b7116b5813fda"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disables the deferred timer event source. <br /></td></tr>
<tr class="separator:adac8926977e51c26ea1b7116b5813fda"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:adcda35d9c57ee3bfd046c36e73f4a52b"><td class="memItemLeft" align="right" valign="top"><a id="adcda35d9c57ee3bfd046c36e73f4a52b"></a>
const std::string&#160;</td><td class="memItemRight" valign="bottom"><b>mName</b></td></tr>
<tr class="separator:adcda35d9c57ee3bfd046c36e73f4a52b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03621597bc4e10012dd36f3fc0a1de01"><td class="memItemLeft" align="right" valign="top"><a id="a03621597bc4e10012dd36f3fc0a1de01"></a>
std::thread&#160;</td><td class="memItemRight" valign="bottom"><b>mEPollThread</b></td></tr>
<tr class="separator:a03621597bc4e10012dd36f3fc0a1de01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1658afdba2f531cfe23ee33e897ea3c2"><td class="memItemLeft" align="right" valign="top"><a id="a1658afdba2f531cfe23ee33e897ea3c2"></a>
std::atomic&lt; pid_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>mEPollThreadId</b></td></tr>
<tr class="separator:a1658afdba2f531cfe23ee33e897ea3c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8335ce48e8a289f3b98ce379b668474"><td class="memItemLeft" align="right" valign="top"><a id="ad8335ce48e8a289f3b98ce379b668474"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>mEPollFd</b></td></tr>
<tr class="separator:ad8335ce48e8a289f3b98ce379b668474"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e4aec59ab2493d0810bf9197cbba156"><td class="memItemLeft" align="right" valign="top"><a id="a9e4aec59ab2493d0810bf9197cbba156"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>mDeathEventFd</b></td></tr>
<tr class="separator:a9e4aec59ab2493d0810bf9197cbba156"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b2259ba9a885d112d4b0c5ba4126f75"><td class="memItemLeft" align="right" valign="top"><a id="a9b2259ba9a885d112d4b0c5ba4126f75"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>mDeferTimerFd</b></td></tr>
<tr class="separator:a9b2259ba9a885d112d4b0c5ba4126f75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ee7b5d09d01121aa07565da0115f48b"><td class="memItemLeft" align="right" valign="top"><a id="a2ee7b5d09d01121aa07565da0115f48b"></a>
const struct itimerspec&#160;</td><td class="memItemRight" valign="bottom"><b>mDeferTimerSpec</b></td></tr>
<tr class="separator:a2ee7b5d09d01121aa07565da0115f48b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8df763c5e804585bb4d1100237236ee5"><td class="memItemLeft" align="right" valign="top"><a id="a8df763c5e804585bb4d1100237236ee5"></a>
<a class="el" href="classAICommon_1_1Spinlock.html">Spinlock</a>&#160;</td><td class="memItemRight" valign="bottom"><b>mLock</b></td></tr>
<tr class="separator:a8df763c5e804585bb4d1100237236ee5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b9478ec0cc1b94e82b6bda7cad4eb52"><td class="memItemLeft" align="right" valign="top"><a id="a2b9478ec0cc1b94e82b6bda7cad4eb52"></a>
const int&#160;</td><td class="memItemRight" valign="bottom"><b>mMaxSources</b></td></tr>
<tr class="separator:a2b9478ec0cc1b94e82b6bda7cad4eb52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa53c472fbb25a45d3e89937ecee8b26"><td class="memItemLeft" align="right" valign="top"><a id="aaa53c472fbb25a45d3e89937ecee8b26"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>mDeferredSources</b></td></tr>
<tr class="separator:aaa53c472fbb25a45d3e89937ecee8b26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50e81e3ac2459f6fa2512957709944d1"><td class="memItemLeft" align="right" valign="top"><a id="a50e81e3ac2459f6fa2512957709944d1"></a>
std::list&lt; <a class="el" href="structAICommon_1_1PollLoop_1_1tagPollSourceWrapper.html">PollSourceWrapper</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>mSources</b></td></tr>
<tr class="separator:a50e81e3ac2459f6fa2512957709944d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A wrapper around epoll that allows for adding, modifying &amp; deleting of source events. </p>
<p>Poll loop sources are a tuple of a shared_ptr&lt;IPollSource&gt;, an fd and a bitmask of events to listen on. PollSource objects are store as weak_ptrs and only locked when they have been triggered and their process() function is to be called.</p>
<p>This should make the race conditions with calling an object that has been destroy safe, however it does means that PollSource objects shouldn't assume that their process() methods won't be called after they've been removed from the poll loop. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a865914dbb79545a9482743c13b2a6daa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a865914dbb79545a9482743c13b2a6daa">&#9670;&nbsp;</a></span>PollLoop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PollLoop::PollLoop </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxSources</em> = <code>512</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>deferredTimeInterval</em> = <code>20</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructs a poll loop with the given name and restrictions. </p>
<p>A constructed poll loop is not automatically started, rather the caller should call start to spawn a thread and run the poll loop inside it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>The name to give the poll loop thread (nb: thread names are limited to 16 characters). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">maxSources</td><td>The maximum number of event sources that can be installed on the poll loop. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">deferredTimeInterval</td><td>The time interval in milliseconds of the deferred timer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a0dabcfb6a63cd62574091afa35e03efd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0dabcfb6a63cd62574091afa35e03efd">&#9670;&nbsp;</a></span>addSource()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool PollLoop::addSource </td>
          <td>(</td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="classAICommon_1_1IPollSource.html">IPollSource</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>events</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds a new event source to the poll loop. </p>
<p>A source is a file descriptor, a bitmask of events to wait for and a <a class="el" href="classAICommon_1_1IPollSource.html">IPollSource</a> object that will be called when any of the events in the bitmask occur on the file descriptor.</p>
<p>This method may fail if the number of sources installed exceeds the maximum allowed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">source</td><td>The source object to call process() on when an event occurs </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>The file descriptor to poll on </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">events</td><td>A bitmask of events to listen on</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true on success, false on failure. </dd></dl>

<p>Implements <a class="el" href="classAICommon_1_1IPollLoop.html">AICommon::IPollLoop</a>.</p>

</div>
</div>
<a id="a8ef583f71c1d91474d429b09af233db3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ef583f71c1d91474d429b09af233db3">&#9670;&nbsp;</a></span>enableDeferredTimer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PollLoop::enableDeferredTimer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Enables the deferred timer event source. </p>
<p>This is an internal function that is called when a source event has been 'deferred', i.e. a client has called modSource(..., EPOLLDEFERRED). </p>

</div>
</div>
<a id="add4ae9a2aee94647cc3eedadbea8f1b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add4ae9a2aee94647cc3eedadbea8f1b4">&#9670;&nbsp;</a></span>gettid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pid_t PollLoop::gettid </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the linux thread id of the poll loop thread. </p>
<p>If the poll loop /threa is not current running -1 will be returned. </p>

<p>Implements <a class="el" href="classAICommon_1_1IPollLoop.html">AICommon::IPollLoop</a>.</p>

</div>
</div>
<a id="a78cfcc2124da0b44389e515f09ded78a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78cfcc2124da0b44389e515f09ded78a">&#9670;&nbsp;</a></span>hasSource()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool PollLoop::hasSource </td>
          <td>(</td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="classAICommon_1_1IPollSource.html">IPollSource</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>source</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns true if the specified source is currently installed in the pollLoop. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">source</td><td>The source object to search for in the pollLoop</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if source installed </dd></dl>

<p>Implements <a class="el" href="classAICommon_1_1IPollLoop.html">AICommon::IPollLoop</a>.</p>

</div>
</div>
<a id="acd8da81ba9d8b1a08f9ff577b0edfa10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd8da81ba9d8b1a08f9ff577b0edfa10">&#9670;&nbsp;</a></span>run()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PollLoop::run </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>priority</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The poll loop thread function. </p>
<p>This is the thread that does all the epoll stuff. </p>

</div>
</div>
<a id="a1bec68e5aa186a6564e8d7982d8d8c16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bec68e5aa186a6564e8d7982d8d8c16">&#9670;&nbsp;</a></span>start()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool PollLoop::start </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>priority</em> = <code>-1</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Starts the poll thread. </p>
<p>If the poll loop was already running it is stopped and restarted.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">priority</td><td>The SCRED_RR priority in which to run the poll loop, if -1 the priority is inherited from the calling thread</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true on success, false on failure. </dd></dl>

<p>Implements <a class="el" href="classAICommon_1_1IPollLoop.html">AICommon::IPollLoop</a>.</p>

</div>
</div>
<a id="ab95845e01aab416d883a04f78c04d450"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab95845e01aab416d883a04f78c04d450">&#9670;&nbsp;</a></span>stop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PollLoop::stop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Stops the poll loop thread. </p>
<p>Stops the poll loop and cleans up all the resources associated with it. </p>

<p>Implements <a class="el" href="classAICommon_1_1IPollLoop.html">AICommon::IPollLoop</a>.</p>

</div>
</div>
<a id="ae96184e0f75c19be48f69661e4536d0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae96184e0f75c19be48f69661e4536d0f">&#9670;&nbsp;</a></span>threadId()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::thread::id PollLoop::threadId </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the thread id of the poll loop thread. </p>
<p>If the poll loop /threa is not current running, a default constructed std::thread::id is returned. </p>

<p>Implements <a class="el" href="classAICommon_1_1IPollLoop.html">AICommon::IPollLoop</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>AppInfrastructure/Common/include/<a class="el" href="PollLoop_8h_source.html">PollLoop.h</a></li>
<li>AppInfrastructure/Common/source/PollLoop.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
